{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
</head>
<body>
    <h1>Welcome, {{ personal_info.name }}!</h1>

    <div>
        <h2>Your Questions</h2>
        {% if questions %}
            <ul>
                {% for question in questions %}
                    <li>{{ question.question_text }} - {% if question.is_answered %}Answered{% else %}Unanswered{% endif %}</li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No questions found.</p>
        {% endif %}
    </div>

    {% if answers %}
        <div>
            <h2>Your Answers</h2>
            <ul>
                {% for answer in answers %}
                    <li>{{ answer.answer_text }} - Answered by {{ answer.teacher.first_name }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if is_teacher %}
        <div>
            <h2>All Questions</h2>
            <h3>Answered Questions</h3>
            <ul>
                {% for question in questions.answered %}
                    <li>{{ question.question_text }} - Answered</li>
                {% endfor %}
            </ul>

            <h3>Unanswered Questions</h3>
            <ul>
                {% for question in questions.unanswered %}
                    <li>{{ question.question_text }} - Unanswered</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {% if is_admin %}
        <div>
            <h2>Admin Controls</h2>
            <h3>All Students</h3>
            <ul>
                {% for student in students %}
                    <li>{{ student.first_name }} ({{ student.email }})</li>
                {% endfor %}
            </ul>

            <h3>All Teachers</h3>
            <ul>
                {% for teacher in teachers %}
                    <li>{{ teacher.first_name }} ({{ teacher.email }})</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</body>
</html>
